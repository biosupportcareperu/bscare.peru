<header class="bg-white shadow-sm">
  <div class="container mx-auto px-4 py-4">
    <div class="flex justify-between items-center">
      <!-- Logo -->
      <div class="flex-shrink-0">
        <a href="/">
          {% if section.settings.logo %}
            <img 
              src="{{ section.settings.logo | img_url: '200x' }}" 
              alt="{{ shop.name }}" 
              class="h-10 w-auto"
            >
          {% else %}
            <span class="text-2xl font-bold text-teal">{{ shop.name }}</span>
          {% endif %}
        </a>
      </div>
      
      <!-- Navigation -->
      <nav class="hidden md:flex items-center space-x-8">
        {% for link in section.settings.menu.links %}
          <a 
            href="{{ link.url }}" 
            class="font-medium text-gray-700 hover:text-teal transition-colors duration-200"
          >
            {{ link.title }}
          </a>
        {% endfor %}
      </nav>

      <!-- Search Cart and Menu Toggle -->
      <div class="flex items-center space-x-4">
        <!-- Search Toggle -->
        <button x-data @click="$dispatch('open-search')" class="text-gray-700 hover:text-teal">
          <i class="fa-solid fa-magnifying-glass"></i>
        </button>
        
        <!-- Cart -->
        <a href="/cart" class="text-gray-700 hover:text-teal relative">
          <i class="fa-solid fa-shopping-cart"></i>
          <span class="absolute -top-2 -right-2 bg-teal text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">
            {{ cart.item_count }}
          </span>
        </a>
        
        <!-- Mobile Menu Toggle -->
        <button 
          x-data="{ open: false }" 
          @click="open = !open" 
          class="md:hidden text-gray-700 hover:text-teal"
        >
          <i x-show="!open" class="fa-solid fa-bars"></i>
          <i x-show="open" class="fa-solid fa-times"></i>
        </button>
      </div>
    </div>
    
    <!-- Mobile Menu (Hidden by Default) -->
    <div 
      x-data="{ open: false }" 
      x-show="open" 
      class="md:hidden pt-4 pb-2 border-t mt-4"
    >
      <div class="flex flex-col space-y-3">
        {% for link in section.settings.menu.links %}
          <a 
            href="{{ link.url }}" 
            class="text-gray-700 hover:text-teal"
          >
            {{ link.title }}
          </a>
        {% endfor %}
      </div>
    </div>
  </div>
</header>

<!-- Search Overlay -->
<div 
  x-data="{ open: false }" 
  @open-search.window="open = true"
  x-show="open" 
  @keydown.escape.window="open = false"
  class="fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4"
>
  <div 
    @click.away="open = false"
    class="bg-white rounded-lg shadow-xl w-full max-w-xl p-6"
  >
    <div class="flex justify-between items-center mb-4">
      <h3 class="text-lg font-semibold">{{ 'general.search.title' | t }}</h3>
      <button @click="open = false" class="text-gray-400 hover:text-gray-600">
        <i class="fa-solid fa-times"></i>
      </button>
    </div>
    
    <form action="/search" method="get" class="relative">
      <input 
        type="text" 
        name="q" 
        placeholder="{{ 'general.search.placeholder' | t }}" 
        class="w-full border border-gray-300 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-teal focus:border-transparent"
      >
      <button 
        type="submit" 
        class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-teal"
      >
        <i class="fa-solid fa-search"></i>
      </button>
    </form>
  </div>
</div>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo image"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    }
  ],
  "presets": [
    {
      "name": "Header",
      "category": "Header"
    }
  ]
}
{% endschema %}